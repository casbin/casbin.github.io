<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>RBAC · Casbin</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Role definition"/><meta name="docsearch:language" content="ko"/><meta property="og:title" content="RBAC · Casbin"/><meta property="og:type" content="website"/><meta property="og:url" content="https://casbin.org/"/><meta property="og:description" content="## Role definition"/><meta property="og:image" content="https://casbin.org/img/casbin.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://casbin.org/img/casbin.svg"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai-sublime.min.css"/><link rel="alternate" type="application/atom+xml" href="https://casbin.org/blog/atom.xml" title="Casbin Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://casbin.org/blog/feed.xml" title="Casbin Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-119750650-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/css/code-blocks-buttons.css"/><link rel="stylesheet" href="/css/custom.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-blocks-buttons.js"></script><script type="text/javascript" src="/js/disqus.js"></script><script type="text/javascript" src="/js/baidu-analytics.js"></script><script type="text/javascript" src="/js/hotjar.js"></script><script type="text/javascript" src="/js/gitter.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/ko"><img class="logo" src="/img/casbin.svg" alt="Casbin"/><h2 class="headerTitleWithLogo">Casbin</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/ko/overview" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/docs/ko/management-api" target="_self">API</a></li><li class=""><a href="/ko/editor" target="_self">Editor</a></li><li class=""><a href="https://plugins.jetbrains.com/plugin/14809-casbin" target="_self">JetBrains Plugin</a></li><li class=""><a href="https://door.casbin.com" target="_self">Casdoor</a></li><li class=""><a href="https://forum.casbin.com" target="_self">Forum</a></li><li class=""><a href="https://oa.casbin.com" target="_self">OA</a></li><li class=""><a href="https://trend.casbin.org" target="_self">Trend</a></li><li class=""><a href="https://cloud.casbin.org" target="_self">Cloud</a></li><li class=""><a href="/ko/help" target="_self">Help</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>한국어</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/rbac">English</a></li><li><a href="/docs/zh-CN/rbac">中文</a></li><li><a href="https://crowdin.com/project/casbin" target="_blank" rel="noreferrer noopener">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/casbin" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Model</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">The Basics</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ko/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/get-started">Get Started</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/how-it-works">How it Works</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/tutorials">Tutorials</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Model</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ko/supported-models">Supported Models</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/syntax-for-models">Syntax for Models</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/function">Function</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/ko/rbac">RBAC</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/rbac-with-domains">RBAC with Domains</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/abac">ABAC</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Storage</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ko/model-storage">Model Storage</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/policy-storage">Policy Storage</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/policy-subset-loading">Policy Subset Loading</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Extensions</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ko/adapters">Adapters</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/watchers">Watchers</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/dispatchers">Dispatchers</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/role-managers">Role Managers</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/middlewares">Middlewares</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ko/management-api">Management API</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/rbac-api">RBAC API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Advanced Usage</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ko/multi-threading">Multi-threading</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/benchmark">Benchmarks</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/performance">Performance Optimization</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Management</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ko/admin-portal">Admin Portal</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/service">Casbin Service</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/log-error">Log &amp; Error Handling</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/online-editor">Online Editor</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/frontend">Frontend Usage</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">More</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ko/adopters">Our Adopters</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/privacy-policy">Privacy Policy</a></li><li class="navListItem"><a class="navItem" href="/docs/ko/terms-of-service">Terms of Service</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/casbin/ko" target="_blank" rel="noreferrer noopener">Translate</a><h1 id="__docusaurus" class="postHeaderTitle">RBAC</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="role-definition"></a><a href="#role-definition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Role definition</h2>
<p><code>[role_definition]</code> is the definition for the RBAC role inheritance relations. Casbin supports multiple instances of RBAC systems, e.g., users can have roles and their inheritance relations, and resources can have roles and their inheritance relations too. These two RBAC systems won't interfere.</p>
<p>This section is optional. If you don't use RBAC roles in the model, then omit this section.</p>
<pre><code class="hljs css language-ini"><span class="hljs-section">[role_definition]</span>
<span class="hljs-attr">g</span> = _, _
<span class="hljs-attr">g2</span> = _, _
</code></pre>
<p>The above role definition shows that <code>g</code> is a RBAC system, and <code>g2</code> is another RBAC system. <code>_, _</code> means there are two parties inside an inheritance relation. As a common case, you usually use <code>g</code> alone if you only need roles on users.  You can also use <code>g</code> and <code>g2</code> when you need roles (or groups) on both users and resources. Please see the <a href="https://github.com/casbin/casbin/blob/master/examples/rbac_model.conf">rbac_model.conf</a> and <a href="https://github.com/casbin/casbin/blob/master/examples/rbac_with_resource_roles_model.conf">rbac_model_with_resource_roles.conf</a> for examples.</p>
<p>Casbin stores the actual user-role mapping (or resource-role mapping if you are using roles on resources) in the policy, for example:</p>
<pre><code class="hljs">p, <span class="hljs-keyword">data</span>2_admin, <span class="hljs-keyword">data</span>2, read
g, alice, <span class="hljs-keyword">data</span>2_admin
</code></pre>
<p>It means <code>alice</code> inherits/is a member of role <code>data2_admin</code>. <code>alice</code> here can be a user, a resource or a role. Casbin only recognizes it as a string.</p>
<p>Then in a matcher, you should check the role as below:</p>
<pre><code class="hljs css language-ini"><span class="hljs-section">[matchers]</span>
<span class="hljs-attr">m</span> = g(r.sub, p.sub) &amp;&amp; r.obj == p.obj &amp;&amp; r.act == p.act
</code></pre>
<p>It means <code>sub</code> in the request should have the role <code>sub</code> in the policy.</p>

    <div class="admonition admonition-note">
      <div class="admonition-heading">
        <h5><div class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></div> note</h5>
      </div>
      <div class="admonition-content">
    <ol>
<li>Casbin only stores the user-role mapping.</li>
<li>Casbin doesn't verify whether a user is a valid user, or role is a valid role. That should be taken care of by authentication.</li>
<li>Do not use the same name for a user and a role inside a RBAC system, because Casbin recognizes users and roles as strings, and there's no way for Casbin to know whether you are specifying user <code>alice</code> or role <code>alice</code>. You can simply solve it by using <code>role_alice</code>.</li>
<li>If <code>A</code> has role <code>B</code>, <code>B</code> has role <code>C</code>, then <code>A</code> has role <code>C</code>. This transitivity is infinite for now.</li>
</ol>
</div></div><h2><a class="anchor" aria-hidden="true" id="role-hierarchy"></a><a href="#role-hierarchy" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Role hierarchy</h2>
<p>Casbin's RBAC supports RBAC1's role hierarchy feature, meaning if <code>alice</code> has <code>role1</code>, <code>role1</code> has <code>role2</code>, then <code>alice</code> will also have <code>role2</code> and inherit its permissions.</p>
<p>Here is a concept called hierarchy level. So the hierarchy level for this example is 2. For the built-in role manager in Casbin, you can specify the max hierarchy level. The default value is 10. It means an end user like <code>alice</code> can only inherit 10 levels of roles.</p>
<pre><code class="hljs css language-go"><span class="hljs-comment">// NewRoleManager is the constructor for creating an instance of the</span>
<span class="hljs-comment">// default RoleManager implementation.</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewRoleManager</span><span class="hljs-params">(maxHierarchyLevel <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">rbac</span>.<span class="hljs-title">RoleManager</span></span> {
    rm := RoleManager{}
    rm.allRoles = &amp;sync.Map{}
    rm.maxHierarchyLevel = maxHierarchyLevel
    rm.hasPattern = <span class="hljs-literal">false</span>

    <span class="hljs-keyword">return</span> &amp;rm
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="how-to-distinguish-role-from-user"></a><a href="#how-to-distinguish-role-from-user" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to distinguish role from user?</h2>
<p>Casbin doesn't distinguish role from user in its RBAC. They are all treated as strings. If you only use single-level RBAC (a role will never be a member of another role). You can use <code>e.GetAllSubjects()</code> to get all users and <code>e.GetAllRoles()</code> to get all roles. They just list all <code>u</code> and all <code>r</code> respectively in all <code>g, u, r</code> rules.</p>
<p>But if you are using multi-level RBAC (with role hierarchy), and your application doesn't record whether a name (string) is a user or a role, or you have user and role with same name. You can add a prefix to role like <code>role::admin</code> before passing it to Casbin. So you will know if it's a role by checking this prefix.</p>
<h2><a class="anchor" aria-hidden="true" id="how-to-query-implicit-roles-or-permissions"></a><a href="#how-to-query-implicit-roles-or-permissions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to query implicit roles or permissions?</h2>
<p>When a user inherits a role or permission via RBAC hierarchy instead of directly assigning them in a policy rule, we call such type of assignment as <code>implicit</code>. To query such implicit relations, you need to use these 2 APIs: <code>GetImplicitRolesForUser()</code> and <code>GetImplicitPermissionsForUser</code> instead of <code>GetRolesForUser()</code> and <code>GetPermissionsForUser</code>. For more details, please see <a href="https://github.com/casbin/casbin/issues/137">this GitHub issue</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="use-pattern-matching-in-rbac"></a><a href="#use-pattern-matching-in-rbac" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use pattern matching in RBAC</h2>
<p>Sometimes, you want some subjects, object or domains/tenants with the specific pattern to be automatically granted to a role. Pattern matching functions in RBAC can help you do that. A pattern matching function shares the same parameters and return value as the previous <a href="https://casbin.org/docs/en/syntax-for-models#functions-in-matchers">matcher function</a>.</p>
<p>The pattern matching function supports each parameter of g.</p>
<p>We know that normally RBAC is expressed as <code>g(r.sub, p.sub)</code> in matcher. Then we will use policy like:</p>
<pre><code class="hljs">p, alice, <span class="hljs-keyword">book_group, </span>read
g, /<span class="hljs-keyword">book/1, </span><span class="hljs-keyword">book_group
</span>g, /<span class="hljs-keyword">book/2, </span><span class="hljs-keyword">book_group
</span></code></pre>
<p>So <code>alice</code> can read all books including <code>book 1</code> and <code>book 2</code>. But there can be thousands of books and it's very tedious to add each book to the book role (or group) with one <code>g</code> policy rule.</p>
<p>But with pattern matching functions, you can write the policy with only one line:</p>
<pre><code class="hljs">g, /<span class="hljs-keyword">book/:id, </span><span class="hljs-keyword">book_group
</span></code></pre>
<p>Casbin will automatically match <code>/book/1</code> and <code>/book/2</code> into pattern <code>/book/:id</code> for you. You only need to register the function with the enforcer like:</p>
<pre><code class="hljs css language-go">r := e.GetRoleManager()
r.(*defaultrolemanager.RoleManager).AddMatchingFunc(<span class="hljs-string">"KeyMatch2"</span>,util.KeyMatch2)
</code></pre>
<p>When Using a pattern matching function in domains/tenants, You need to register the function to enforcer and model.</p>
<p>register <code>keyMatch2</code> to enforcer:</p>
<pre><code class="hljs css language-go">r := e.GetRoleManager()
r.(*defaultrolemanager.RoleManager).AddDomainMatchingFunc(<span class="hljs-string">"KeyMatch2"</span>,util.KeyMatch2)
</code></pre>
<p>register <code>keyMatch2</code> to model:</p>
<pre><code class="hljs">m = g(r<span class="hljs-selector-class">.sub</span>, <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.sub</span>, r.dom) &amp;&amp; keyMatch2(r<span class="hljs-selector-class">.dom</span>, <span class="hljs-selector-tag">p</span>.dom) &amp;&amp; r<span class="hljs-selector-class">.obj</span> == <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.obj</span> &amp;&amp; r<span class="hljs-selector-class">.act</span> == <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.act</span>
</code></pre>
<p>You can see the full example <a href="https://github.com/casbin/casbin/blob/dbdb6cbe2e7a80863e4951f9ff36da07fef01b75/model_test.go#L278-L307">here</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="role-manager"></a><a href="#role-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Role manager</h2>
<p>See <a href="/docs/en/role-managers">Role Managers</a> section for details.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2/17/2021</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/ko/function"><span class="arrow-prev">← </span><span>Function</span></a><a class="docs-next button" href="/docs/ko/rbac-with-domains"><span>RBAC with Domains</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#role-definition">Role definition</a></li><li><a href="#role-hierarchy">Role hierarchy</a></li><li><a href="#how-to-distinguish-role-from-user">How to distinguish role from user?</a></li><li><a href="#how-to-query-implicit-roles-or-permissions">How to query implicit roles or permissions?</a></li><li><a href="#use-pattern-matching-in-rbac">Use pattern matching in RBAC</a></li><li><a href="#role-manager">Role manager</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/casbin.svg" alt="Casbin" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/ko/get-started">Getting Started</a><a href="/docs/ko/management-api">Management API</a><a href="/docs/ko/rbac-api">RBAC API</a><a href="/docs/ko/middlewares">Middlewares</a></div><div><h5>Community</h5><a href="/ko/users">Who&#x27;s using Casbin?</a><a href="https://forum.casbin.com/" target="_blank">Forum</a><a href="https://stackoverflow.com/search?q=casbin" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://gitter.im/casbin/Lobby" target="_blank">Project Chat</a></div><div><a class="github-button" href="https://github.com/casbin/casbin" data-icon="octicon-star" data-count-href="/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Casbin</a>          <a class="github-button" href="https://github.com/casbin/jcasbin" data-icon="octicon-star" data-count-href="/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">jCasbin</a><br/><a class="github-button" href="https://github.com/casbin/node-casbin" data-icon="octicon-star" data-count-href="/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Node-Casbin</a>   <a class="github-button" href="https://github.com/php-casbin/php-casbin" data-icon="octicon-star" data-count-href="/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">PHP-Casbin</a><a class="github-button" href="https://github.com/casbin/pycasbin" data-icon="octicon-star" data-count-href="/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">PyCasbin</a>          <a class="github-button" href="https://github.com/casbin/Casbin.NET" data-icon="octicon-star" data-count-href="/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Casbin.NET</a><a class="github-button" href="https://github.com/casbin/casbin-cpp" data-icon="octicon-star" data-count-href="/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Casbin-CPP</a>        <a class="github-button" href="https://github.com/casbin/casbin-rs" data-icon="octicon-star" data-count-href="/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Casbin-RS</a><div class="social"><a href="https://twitter.com/CasbinNews" class="twitter-follow-button">Follow @CasbinNews</a></div><div class="social"><div class="fb-like" data-href="https://casbin.org" data-colorscheme="dark" data-layout="standard" data-share="true" data-width="225" data-show-faces="false"></div></div></div></section><section class="copyright">Copyright © 2021 Casbin contributors.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.fbAsyncInit = function() {FB.init({appId:'1354585054683583',xfbml:true,version:'v2.7'});};(function(d, s, id){var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) {return;}js = d.createElement(s); js.id = id;js.src = '//connect.facebook.net/en_US/sdk.js';fjs.parentNode.insertBefore(js, fjs);}(document, 'script','facebook-jssdk'));
                </script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2b87bf88e794912bdbe1b08420681efa',
                indexName: 'casbin',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:ko"]}
              });
            </script></body></html>